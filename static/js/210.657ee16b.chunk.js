"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[210],{2210:function(e,s,t){t.r(s),t.d(s,{default:function(){return x}});var r=t(9439),n=t(2791),a=t(8687),i=t(1076),o=t(7437),u="ChatPage_textarea__SRq8u",l=t(3356),c=t(184),d=function(){var e=(0,a.I0)();return(0,n.useEffect)((function(){return e((0,i.WE)()),function(){e((0,i.R7)())}}),[e]),(0,c.jsxs)("div",{children:["error"===status&&(0,c.jsx)("div",{children:"Some error occurred. Please refresh page"}),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h,{}),(0,c.jsx)(f,{isAuth:!0})]})]})},h=function(){var e=(0,n.useRef)(null),s=(0,a.v9)((function(e){return e.chat.messages})),t=(0,n.useState)(!1),i=(0,r.Z)(t,2),o=i[0],u=i[1];return(0,n.useEffect)((function(){var s;o&&(null===(s=e.current)||void 0===s||s.scrollIntoView({behavior:"smooth"}))}),[s]),(0,c.jsxs)("div",{style:{height:"500px",overflowY:"auto"},onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<300?!o&&u(!0):o&&u(!1)},children:[s.map((function(e,s){return(0,c.jsx)(g,{message:e},e.id)})),(0,c.jsx)("div",{ref:e})]})},g=n.memo((function(e){var s=e.message;return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,c.jsx)("img",{alt:"user photo",src:s.photo}),(0,c.jsx)("b",{style:{marginLeft:"10px"},children:s.userName})]}),s.message,(0,c.jsx)("hr",{})]})})),f=function(e){var s=e.isAuth,t=(0,a.I0)(),o=(0,n.useState)(""),d=(0,r.Z)(o,2),h=d[0],g=d[1],f=(0,a.v9)((function(e){return e.chat.status}));return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:(0,c.jsx)("textarea",{onChange:function(e){return g(e.currentTarget.value)},value:h,className:u})}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{disabled:"ready"!==f,onClick:function(){h&&(t((0,i.bG)(h)),g(""))},className:l.Z.button,children:"Send"})}),s?"":(0,c.jsx)("h1",{children:(0,c.jsx)("b",{children:"'Chat works only for login users!'"})})]})},x=function(){var e=(0,a.v9)(o.J);return(0,c.jsx)("div",{children:e?(0,c.jsx)(d,{}):(0,c.jsx)(f,{isAuth:e})})}},3356:function(e,s){s.Z={dialogs:"Dialogs_dialogs__ZX6XS",dialogsItem:"Dialogs_dialogsItem__-z+aW",dialog:"Dialogs_dialog__ZJn+w",active:"Dialogs_active__Ej4j8",userAvatar:"Dialogs_userAvatar__DxRfc",messages:"Dialogs_messages__NSW+E",textarea:"Dialogs_textarea__duARs",button:"Dialogs_button__osVEB"}}}]);
//# sourceMappingURL=210.657ee16b.chunk.js.map